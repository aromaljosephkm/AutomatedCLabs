var global_result;function create_modal(points){var modal_html='<div class="modal-dialog modal-dialog-centered modal-lg" role="document"> <div class="modal-content"> <div class="modal-header"> <h5><strong>'+points+'</strong>Congratulations</h5> </div><div class="modal-body"> <p class="message"> <strong>Earned '+points+' Geekoins</strong> Use G Coins to redeems exciting rewards and gifts </p></div></div></div>';$("#preassessmentCompletionModal").html(modal_html);$("#preassessmentCompletionModal").modal("show");}
function create_modal_update(points){var modal_html='<div class="modal-dialog modal-dialog-centered modal-lg" role="document"><div class="modal-content"><div class="modal-header"><h5><strong style="align:center;"> Success!</strong>Project Updated<br></h5></div><div class="modal-body"><p class="message"></p></div></div></div>';$("#preassessmentCompletionModal").html(modal_html);$("#preassessmentCompletionModal").modal("show");}
function share_modal_project(qn){var myElem=document.getElementById('shareModal');if(myElem===null)
$('body').append('<div class="modal " tabindex="-1" role="dialog" id="shareModal" aria-hidden="true"></div><script>function copy(){var copyText=$("#windowurl");copyText.select();document.execCommand("copy");}</script>');var url_share=window.location.href.split('#');var page_url=url_share[0]+"#a_"+qn;var share_modal='<div class="modal-dialog h-100 d-flex flex-column justify-content-center my-0 " role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Share</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="post-share-modal modal-body"><div id="social"><a target="_blank" style="text-decoration: none;" href="https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(page_url)+'" class="facebookBtn smGlobalBtn"></a><a target="_blank" style="text-decoration: none;" href="https://twitter.com/intent/tweet?text='+page_url+'" data-size="large"class="twitterBtn smGlobalBtn"></a><a target="_blank" style="text-decoration: none;" href="https://www.linkedin.com/shareArticle?mini=true&url='+encodeURIComponent(page_url)+'" class="linkedinBtn smGlobalBtn"></a><a target="_blank"  href="whatsapp://send?text='+encodeURIComponent(page_url)+'" data-action="share/whatsapp/share" class="no-underline whatsappBtn smGlobalBtn"></a></div><hr><div></input></div><div class="input-group mb-3"><input type="text" class="form-control form-rounded" id="windowurl" value="'+page_url+'"><div class="input-group-append"><span class="input-group-text" id="basic-addon2"><a href="javascript:copy();"><i class="fas fa-link"></i></a></span></div></div></div><div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal" style="color:white;">Close</button></div></div></div>';$("#shareModal").html(share_modal);$("#shareModal").modal('show');}
$(document).ready(function(){authorize.loginCheck();function create_ui(question,tags,image,number,qno,level){var tags_html='';for(var k=0;k<tags.length;k++){tags_html+='<span class="badge badge-pill badge-guvi-tag">'+tags[k]+'</span>';}
param=qno+level;if(level=="beginner"){beginner="beginner";}else if(level=="player"){player="player";}else if(level=="hunter"){hunter="hunter";}else if(level=="pro"){pro="pro";}
if(image=="none"){var img='<span class=""></span>';}else{var img='<span><img src="images/project-board/'+image+'" style="background-position-y: 0;width: 150px;height: auto;"></span>';}
if(authorize.getSession("authToken")){var card_ui='<div class="col-12" id="a_'+qno+'"> <div class="card projects-card shadow-sm"> <div class="card-body"> <div class="row"> <div class="col-10  "> <p class="questions_'+level+' ">'+question+'</p><div id="projectOne'+number+'" class="collapse" data-parent="#create_'+level+'"><div class="row"> <div class="col solution"> <h5>Submit your Solution</h5> <form> <div class="form-group"> <label for="selectPlatform">Select platform</label> <select class="form-control selected_platform platform'+level+qno+'" id="hosted'+number+'" data-id="'+number+'"> <option>Android</option> <option>Web Development</option></select> </div><div class="form-group"> <label for="githubUrl'+level+qno+'">Your Github URL</label> <input type="url" class="form-control" id="githubUrl'+level+qno+'"> </div><div class="form-group"  style="display:none" id="hosted_id'+number+'"> <label for="hostedUrl'+level+qno+'">Your Hosted URL</label> <input type="url" placeholder="https://www.example.com" class="form-control" id="hostedUrl'+level+qno+'"> </div><div class="form-group"> <div class="custom-file"> <input type="file" class="custom-file-input" onChange="uploaded(this.id,this)" id="uploadScreenshots'+level+qno+'"  data-qno="'+qno+'" data-level="'+level+'" multiple> <label class="custom-file-label" for="uploadScreenshots'+level+qno+'">Upload screenshots</label> </div></div><canvas class="myCanvas"   id="myCanvas'+level+qno+'" style="display:none"></canvas><div class="btn-wrap"> <button type="button" id="getReward" data-qno="'+qno+'" data-level="'+level+'" class="btn btn-primary submit">Submit</button> <button type="button" class="btn get_url" data-qno="'+qno+'" data-level="'+level+'">Check Peers submissions</button><br></br> </div></form> <div  id="get_url'+qno+level+'"></div><button type="button" id="loadMore'+qno+level+'"  style="color:black;display:none;width:250px;" class="btn">Load More..</button><button type="button" id="hideAll'+qno+level+'"  style="color:white;display:none;width:250px;" class="btn btn-primary">Hide All</button></div></div></div></div><div class="col-md-12 col-lg-2 recruiter">'+img+'</div></div></div><div class="card-footer"> <div class="d-flex flex-row justify-content-between"> <div class="tags"> <p><span class="tags-title">Tags:</span> '+tags_html+'</p></div><button class="btn collapsed" data-toggle="collapse" data-target="#projectOne'+number+'" aria-expanded="true" aria-controls="projectOne'+number+'">View</button> </div><div class="hover-links-wrap"> <ul class="list-unstyled d-flex flex-row justify-content-end secondary-links"> <a href="javascript:share_modal_project('+qno+','+level+');"><li class="share-link"><i class="fas fa-share-alt"></i><span>Share</span></a></li></ul> </div></div></div></div>';}else{var card_ui='<div class="col-12" id="a_'+qno+'"> <div class="card projects-card shadow-sm"> <div class="card-body"> <div class="row"> <div class="col-10  "> <p class="questions_'+level+' ">'+question+'</p><div id="projectOne'+number+'" class="collapse" data-parent="#create_'+level+'"><div class="row"> <div class="col solution"> <h5>Submit your Solution</h5> <form> <div class="form-group"> <label for="selectPlatform">Select platform</label> <select class="form-control selected_platform platform'+level+qno+'" id="hosted'+number+'" data-id="'+number+'"> <option>Android</option> <option>Web Development</option></select> </div><div class="form-group"> <label for="githubUrl'+level+qno+'">Your Github URL</label> <input type="url" class="form-control" id="githubUrl'+level+qno+'"> </div><div class="form-group"  style="display:none" id="hosted_id'+number+'"> <label for="hostedUrl'+level+qno+'">Your Hosted URL</label> <input type="url" placeholder="https://www.example.com" class="form-control" id="hostedUrl'+level+qno+'"> </div><div class="form-group"> <div class="custom-file"> <input type="file" class="custom-file-input" onChange="uploaded(this.id,this)" id="uploadScreenshots'+level+qno+'"  data-qno="'+qno+'" data-level="'+level+'" multiple> <label class="custom-file-label" for="uploadScreenshots'+level+qno+'">Upload screenshots</label> </div></div><canvas class="myCanvas"   id="myCanvas'+level+qno+'" style="display:none"></canvas><div class="btn-wrap"> <button type="button" id="getReward" data-qno="'+qno+'" data-level="'+level+'" class="btn btn-primary submit">Submit</button> <button type="button" class="btn get_url" data-qno="'+qno+'" data-level="'+level+'">Check Peers submissions</button><br></br> </div></form> <div  id="get_url'+qno+level+'"></div><button type="button" id="loadMore'+qno+level+'"  style="color:black;display:none;width:250px;" class="btn">Load More..</button><button type="button" id="hideAll'+qno+level+'"  style="color:white;display:none;width:250px;" class="btn btn-primary">Hide All</button></div></div></div></div><div class="col-md-12 col-lg-2 recruiter">'+img+'</div></div></div><div class="card-footer"> <div class="d-flex flex-row justify-content-between"> <div class="tags"> <p><span class="tags-title">Tags:</span> '+tags_html+'</p></div><button class="btn collapsed navigationLink" data-toggle="collapse" data-target="#projectOne'+number+'" aria-expanded="true" aria-controls="projectOne'+number+'">View</button> </div><div class="hover-links-wrap"> <ul class="list-unstyled d-flex flex-row justify-content-end secondary-links"> <a href="javascript:share_modal_project('+qno+','+level+');"><li class="share-link"><i class="fas fa-share-alt"></i><span>Share</span></a></li></ul> </div></div></div></div>';}
return card_ui;}
function create_ui_cards(name,android,github,hosted,type){if(type=="android"){var card_ui='<div class="card"  style="background-color:#F2F3F4"> <div class="card-body"><h6 class="card-title" style="font-weight:bold">Submitted By- '+name+'</h6><p>GitHub url : <a href="'+android+'">'+android+'</a></p></div></div>';}else{if(hosted=="")
var card_ui='<div class="card" style="background-color:#F2F3F4"> <div class="card-body"><h6 class="card-title" style="font-weight:bold">Submitted By- '+name+'</h6><p>GitHub url : <a href="'+github+'">'+github+'</a></p></div></div>';else{var card_ui='<div class="card" style="background-color:#F2F3F4"> <div class="card-body"><h6 class="card-title" style="font-weight:bold">Submitted By- '+name+'</h6><p>Hosted url : <a href="'+hosted+'">'+hosted+'</a> </p><p>GitHub url : <a href="'+github+'">'+github+'</a></p></div></div>';}}
return card_ui;}
function error_alert(msg,id){var error='<label style="color:red;display: block" class="alert_error" for="'+id+'">'+msg+'</label>';return error;}
var newdata={};newdata["type"]="get_question";authorize.ajax(newdata,'projectBoard',function(data){var beginner_html="";var player_html="";var hunter_html="";var pro_html="";result=JSON.parse(data);for(var i=0;i<result.length;i++){if('img'in result[i]){if(result[i].level=='beginner'){beginner_html+=create_ui(result[i].question,result[i].tags,result[i].img,i,result[i].qno,result[i].level);}else if(result[i].level=="player"){player_html+=create_ui(result[i].question,result[i].tags,result[i].img,i,result[i].qno,result[i].level);}else if(result[i].level=="hunter"){hunter_html+=create_ui(result[i].question,result[i].tags,result[i].img,i,result[i].qno,result[i].level);}else{pro_html+=create_ui(result[i].question,result[i].tags,result[i].img,i,result[i].qno,result[i].level);}}else{if(result[i].level=='beginner'){beginner_html+=create_ui(result[i].question,result[i].tags,"none",i,result[i].qno,result[i].level);}else if(result[i].level=="player"){player_html+=create_ui(result[i].question,result[i].tags,"none",i,result[i].qno,result[i].level);}else if(result[i].level=="hunter"){hunter_html+=create_ui(result[i].question,result[i].tags,"none",i,result[i].qno,result[i].level);}else{pro_html+=create_ui(result[i].question,result[i].tags,"none",i,result[i].qno,result[i].level);}}}
$('.create_ui_beginner').html(beginner_html);$('.create_ui_hunter').html(hunter_html);$('.create_ui_player').html(player_html);$('.create_ui_pro').html(pro_html);if(!authorize.getSession("authToken")){$(".solution").remove();}
$(document).on("change",".selected_platform",function(){var data=$(this).attr("data-id");var selected_platform=$("#hosted"+data+"").val();if(selected_platform=="Web Development"){$('#hosted_id'+$(this).attr("data-id")+'').show();}else{$('#hosted_id'+$(this).attr("data-id")+'').hide();}});projectBoardPage.init();});function isUrlValid(url){return /^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(url);}
function checkGitUrl(git_url){var url,status;subUrl=git_url.split("/");contents=git_url.split("master");var urlLength=subUrl.length;var x;var extn,linecount,user_src;var uname=subUrl[3];var repo=subUrl[4];var content=subUrl[urlLength-1];var check=content.split('.');url="https://api.github.com/repos/"+uname+"/"+repo+"/contents"+""+"?access_token=acbe86fe2ef6e073616c9aa007708891ad15fc24";$.ajax({method:"GET",url:url,async:false,cache:false,success:function(response){if(response){status=response
var program=response.content;status=true;}},error:function(XMLHttpRequest,textStatus,errorThrown){if(textStatus){status=false;}}});return status;}
var image_array=[];var extensions_array=[];$(document).on('change','.custom-file-input',function(){var flag=0;var files=this.files;var errors="";if(!files){errors+="File upload not supported by your browser.";}
if(files&&files[0]){for(var i=0;i<files.length;i++){var file=files[i];if(!((/\.(png|jpeg|jpg|gif)$/i).test(file.name))){flag++;errors+=file.name+"Unsupported Image extension\n";$('.custom-file-input').val("");}}
if(flag==0){var name=[];for(var i=0;i<files.length;i++){var file=files[i];if((/\.(png|jpeg|jpg|gif)$/i).test(file.name)){var filename=file.name;var extension=filename.split('.').pop();extensions_array.push(extension);readImage(file);}}}
if(filename)
$(this).after('<span class="badge badge-pill badge-guvi-tag">'+filename+'</span>');}
if(errors){$(this).after('<div class="alert alert-danger" id="unsupported" role="alert">'+errors+'</div>');$('#unsupported').delay(7000).fadeOut();}});function readImage(file){var reader=new FileReader();reader.addEventListener("load",function(){image_array.push(reader.result);var image=new Image();image.src=reader.result;});reader.readAsDataURL(file);}
$(document).on("click",".submit",function(){var formdata={};var level=$(this).attr('data-level');var qno=$(this).attr('data-qno');var topic="project";var platform=$(".platform"+level+qno+"").val();var url=$("#githubUrl"+level+qno+"").val();formdata['level']=level;formdata['qno']=qno;formdata['topic']=topic;formdata['platform']=platform;formdata['activity']="codekata_"+level+"_submit";formdata['type']="submit";if(url==""){var errormsg=error_alert("Enter the github url",'githubUrl'+level+qno+'');$('#githubUrl'+level+qno+'').after(errormsg);}else{$(".alert_error").css("display","none");var valid_url=isUrlValid(url);if(valid_url){var valid_git_url=checkGitUrl(url);if(valid_git_url==true){$(".alert_error").css("display","none");formdata['githuburl']=$('#githubUrl'+level+qno+'').val();if(platform=="Web Development"){var hostedUrl=$("#hostedUrl"+level+qno+"").val();if(hostedUrl==""){var errormsg=error_alert("please enter hosted url",'#hostedUrl'+level+qno+'')
$('#hostedUrl'+level+qno+'').after(errormsg);}else{$(".alert_error").css("display","none");var valid_hosted_url=isUrlValid(hostedUrl);if(valid_hosted_url){$(".alert_error").css("display","none");formdata['hosted']=$('#hostedUrl'+level+qno+'').val();if($('#uploadScreenshots'+level+qno+'').val()==""){formdata['image']="";}else{formdata['image']=image_array;formdata['extension']=extensions_array;}
authorize.ajax(formdata,'projectBoard',function(data){var result=JSON.parse(data);if(result.type=="url_exist"){$('#githubUrl'+level+qno+'').val("");var errormsg=error_alert("Url already exists",'#githubUrl'+level+qno+'');$('#githubUrl'+level+qno+'').after(errormsg);}else if(result.type=="inserted"){var points=result.points_earned;create_modal(points);}else{create_modal_update();}});}else{var errormsg=error_alert("please enter valid hosted url",'#hostedUrl'+level+qno+'')
$('#hostedUrl'+level+qno+'').after(errormsg);}}}else{if($('#uploadScreenshots'+level+qno+'').val()==""){formdata['image']="";}else{formdata['image']=image_array;formdata['extension']=extensions_array;}
authorize.ajax(formdata,'projectBoard',function(data){var result=JSON.parse(data);if(result.type=="url_exist"){$('#githubUrl'+level+qno+'').val("");var errormsg=error_alert("Url already exists",'#githubUrl'+level+qno+'');$('#githubUrl'+level+qno+'').after(errormsg);}else if(result.type=="inserted"){var points=result.points_earned;create_modal(points);}else{create_modal_update();}});}}else{$('#githubUrl'+level+qno+'').val("");var errormsg=error_alert("please enter valid github url",'#githubUrl'+level+qno+'')
$('#githubUrl'+level+qno+'').after(errormsg);}}else{$('#githubUrl'+level+qno+'').val("");var errormsg=error_alert("please enter valid url",'#githubUrl'+level+qno+'')
$('#githubUrl'+level+qno+'').after(errormsg);}}});$(document).on("click",".get_url",function(){var num_of_cards=3
var send_data={};var result;var html_data="";send_data['type']="get_url";var ques=$(this).attr('data-qno');var level=$(this).attr('data-level');send_data['qno']=ques;send_data['level']=level;authorize.ajax(send_data,'projectBoard',function(data){result=JSON.parse(data);global_result=JSON.parse(data);if(result!=null){var length=0;for(var key in result.hash){length++;}
if(length>3){for(var i=1;i<=3;i++){if(result.android_github[i]=="")
html_data+=create_ui_cards(result.name[i],"",result.web_github[i],result.hosted_url[i],"web");else
html_data+=create_ui_cards(result.name[i],result.android_github[i],"","","android");}
$("#loadMore"+ques+level+"").css('display','flex');$("#hideAll"+ques+level+"").css('display','flex');}else{for(var i=1;i<=length;i++){if(result.android_github[i]=="")
html_data+=create_ui_cards(result.name[i],"",result.web_github[i],result.hosted_url[i],"web");else
html_data+=create_ui_cards(result.name[i],result.android_github[i],"","","android");}
$("#hideAll"+ques+level+"").css('display','flex');}
$('#get_url'+ques+level+'').html(html_data);}else
$('#get_url'+ques+level+'').html("<strong>No submissions made yet</strong>");});$(document).on('click','#loadMore'+ques+level+'',function(){return_cards();});$(document).on('click','#hideAll'+ques+level+'',function(){$('#get_url'+ques+level+'').html('');$('#loadMore'+ques+level+'').css('display','none');$('#hideAll'+ques+level+'').css('display','none');});function return_cards(){num_of_cards=num_of_cards+3;var html_data="";var length=0;for(var key in global_result.hash){length++;}
if(num_of_cards>=length){for(var i=1;i<=length;i++){if(global_result.android_github[i]=="")
html_data+=create_ui_cards(global_result.name[i],"",global_result.web_github[i],global_result.hosted_url[i],"web");else
html_data+=create_ui_cards(global_result.name[i],global_result.android_github[i],"","","android");$('#loadMore'+ques+level+'').css('display','none');}}else{for(var i=1;i<=num_of_cards;i++){if(global_result.android_github[i]=="")
html_data+=create_ui_cards(global_result.name[i],"",global_result.web_github[i],global_result.hosted_url[i],"web");else
html_data+=create_ui_cards(global_result.name[i],global_result.android_github[i],"","","android");}}
$('#get_url'+ques+level+'').html(html_data);}});});$("#hackathon").on("click",function(){if($('#hackathon').is(":checked"))
{$("#hackathon_select").show();}else{$("#hackathon_select").hide();}});function required(id){let value=$(id).val();if(!value||(value=="select the hackathon")){$(id).addClass("is-invalid");return false;}else{$(id).removeClass("is-invalid");$(id).addClass("is-valid");return value;}}
$(document).on("click",".is-invalid",function(){$(this).removeClass("is-invalid");});$("#own_submit").on("click",function(){let data={};data["team_name"]=required("#team_name");data["team_members_name"]=required("#team_members_name");data["team_members_mail"]=required("#team_members_mail");data["project_title"]=required("#project_title");data["description"]=required("#description");data["tecnologies_used"]=required("#tecnologies_used");data["github_url"]=required("#github_url");data["hackathon_name"]="NOT_SET";if($('#hackathon').is(":checked")){data["hackathon_name"]=required("#hackathon_name");}
if(data["team_name"]&&data["team_members_name"]&&data["team_members_mail"]&&data["project_title"]&&data["description"]&&data["tecnologies_used"]&&data["github_url"]&&data["hackathon_name"]){$("#own_submit").attr("disabled","true");authorize.ajax(data,'ownProject',function(response){let data=JSON.parse(response);if(data["result"]){$("#ownProject > .card > .card-body").append('<div class="text-success">Project Submitted Successfully<div>');}else{$("#own_submit").attr("disabled","false");}});}});