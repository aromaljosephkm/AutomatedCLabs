var queries={};var url;var capchetoken;grecaptcha.ready(function(){grecaptcha.execute("6LdADb4UAAAAAA1feb36sozffPYRKKOqD9WPbibp",{action:"register"}).then(function(token){capchetoken=token;});});$(window).scroll(function(){if($(this).scrollTop()<3500)
{$('.mobile-buy').show();}
else
{$('.mobile-buy').hide();}});class CourseBundle{setRating(){const stars='.star-ratings-css';const starSetter='.star-ratings-css-top';$(stars).each((idx,star)=>{const rating=$(star).data('rating');const max=$(star).data('max');const width=`${(rating/max)*100}%`;$(star).find(starSetter).css('width',width);});}
decideUser(data){try{if(data.status=="error"){throw data.message;}
$(".custom-radio").prop("hidden",false);if(data.userExists){$("#password").prop("hidden",false);$("#userMessage").prop("hidden",false);$("#nonUserMessage").prop("hidden",true);$("#confirmPassword").prop("hidden",true);$("#userName").prop("hidden",true);if(data.userInfo&&data.userInfo["mobile"]&&data.userInfo["mobile"]!=""){$("#userMobile").val(data.userInfo["mobile"]);}}
else{$("#password").prop("hidden",false);$("#userMessage").prop("hidden",true);$("#confirmPassword").prop("hidden",false);$("#nonUserMessage").prop("hidden",false);$("#userName").prop("hidden",false);}
$("#userEmail").data("registeredUser",data.userExists);}
catch(error){console.log(error);}}
validateField(selector){try{let value=$(selector).val();if(!value){$(selector).addClass("is-invalid");$("#userEmail").data("allFieldValidated",false);}
else if(selector=="#userMobile"){let valid=/^1[+]|[0-9]*$/.test(value);if(!valid||value.length>15||value.length<8){$(selector).addClass("is-invalid");$("#userEmail").data("allFieldValidated",false);}
else{$(selector).removeClass("is-invalid");}}
else if(selector=="#userEmail"){let valid=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);if(!valid){$(selector).addClass("is-invalid");$("#userEmail").data("allFieldValidated",false);}
else{$(selector).removeClass("is-invalid");$("#userEmail").data("allFieldValidated",true);}}
else{$(selector).removeClass("is-invalid");}}
catch(error){console.log(error);}}
hideProp(selector){$(selector).prop("hidden",true);}
showProp(selector){$(selector).prop("hidden",false);}
removeRequired(selector){$(selector).prop("required",false);}
loggedInState(){$("#userEmail").data("loggedState",true);$(".custom-radio").prop("hidden",false);this.hideProp("#password");this.hideProp("#userMessage");if(authorize.getSession("userAuth")){$("#accountGroup").hide();}}
calculateOfferPeriod(){try{let currentTimeStamp=new Date().getTime();let tomorrowTimeStamp=currentTimeStamp+(24*60*60*1000);let tomorrowDate=new Date(tomorrowTimeStamp).getDate();let tomorrowMonth=new Date(tomorrowTimeStamp).getMonth();let tomorrowYear=new Date(tomorrowTimeStamp).getFullYear();let tomorrowMorningTimeStamp=new Date(tomorrowYear,tomorrowMonth,tomorrowDate).getTime();let remainingSeconds=(tomorrowMorningTimeStamp-currentTimeStamp)/1000;let offerTime=this.secondsToHMS(remainingSeconds);return offerTime;}
catch(error){console.log(error);}}
renderOfferPeriod(){try{let offerPeroidMarkup=$("#offerPeriod");let classObj=this;setInterval(function(){let offerTime=classObj.calculateOfferPeriod();},1000);}
catch(error){console.log(error);}}
secondsToHMS(remainingTime){remainingTime=parseInt(remainingTime);let days=Math.floor(remainingTime/(3600*24));let hours=Math.floor(remainingTime%(3600*24)/3600);let minutes=Math.floor(remainingTime%3600/60);let seconds=Math.floor(remainingTime%3600%60);return('0'+days).slice(-2)+"d "+('0'+hours).slice(-2)+"h "+('0'+minutes).slice(-2)+"m "+('0'+seconds).slice(-2)+"s";}}
const sidebar=(function sidebar(){const menuList='#sidebar';const toggleicon='#sidebarToggle .material-icons';const collapseClass='sidebar-collapse';const activeClass='active';const EventMenuOpened='shown.bs.collapse';const EventMenuClosed='hidden.bs.collapse';function handleMobileUI(){$(menuList).on(EventMenuClosed,()=>$(toggleicon).html('menu'));$(menuList).on(EventMenuOpened,()=>$(toggleicon).html('close'));}
function toggleSidebar(){$(menuList).hover(()=>$(menuList).toggleClass(collapseClass));}
const init=()=>{handleMobileUI();toggleSidebar();};return{init};}());const coursesProductPage=(function coursesProductPage(){const pageEl='#courses-product-page';const isFunction=functionToCheck=>(functionToCheck&&{}.toString.call(functionToCheck)==='[object Function]');const finishLoading=(pageEl,cb)=>{$('.spinner').hide();$(pageEl).removeClass('loading');return isFunction(cb)?cb():false;};const init=()=>{const thisPage=($(pageEl).length!==0);if(!thisPage){return;}
sidebar.init();finishLoading(pageEl);};return{init,};}());var applyCoupon=0;$(document).ready(function(){$.each(window.location.search.substr(1).split('&'),function(c,q){var i=q.split('=');queries[i[0].toString()]=decodeURI(i[1]);});url=window.location.href;renderVideo();let obj=new CourseBundle();obj.renderOfferPeriod();let currentdate=new Date().getDate();$("#todaydate").text(currentdate);let emailDomId=$("#userEmail");emailDomId.data("validated",false);emailDomId.data("registeredUser",false);var courses=["java_en","angular_step_by_step_english","python_en","mysql","azure_step_by_step_english","introduction-to-ml","computational_thinking","mongodb_en","servletjsp_en","javascript_en"];let requestData={type:"coursePack",courseId:courses};const stars='.star-ratings-css';const starSetter='.star-ratings-css-top';$(stars).each((idx,star)=>{const rating=$(star).data('rating');const max=$(star).data('max');const width=`${(rating/max)*100}%`;$(star).find(starSetter).css('width',width);});let authToken=authorize.getSession("authToken");if(authToken||authorize.getSession("userAuth")){obj.loggedInState();}
else{emailDomId.data("loggedState",false);}
coursesProductPage.init();let search=new URLSearchParams(document.location.search.substring(1));let courseId=search.get("course");var userType=2;if(authorize.getSession("authToken")==null){$("#emailInput").on('focusout',function(){let email=authorize.validate("#emailInput","email");if(email){authorize.ajax({requestType:"mail_check",email:email},"registerCheck",function(response){userType=JSON.parse(response)["user"];$("#passField").css("display","block");if(!userType){$("#confirmPassword").css("display","block");}});}});}else{let obj={};authorize.ajax({requestType:"loggedIn"},"registerCheck",function(response){response=JSON.parse(response);$("#paymentbtn").data("profileData",response);authorize.setSession("email",response["email"]);authorize.setSession("mobile",response["mobile"]);if(response["passedoutyear"]!="-select-"&&response["passedoutyear"]){authorize.setSession("passedoutyear",response["passedoutyear"]);}
if(response["department"]!="-select-"&&response["department"]){authorize.setSession("department",response["department"]);}
$("#userEmail").val(response["email"]);$("#userEmail").attr("disabled","true");$("#userName").val(response["firstName"]);$("#userName").attr("disabled","true");$("#userEmail").data("loggedState",true);$("#password").prop("hidden",true);$("#confirmPassword").prop("hidden",true);let mobileValidated=/^1[+]|[0-9]*$/.test(response["mobile"]);if(response["mobile"]&&response["mobile"].length<=15&&response["mobile"].length>=8&&mobileValidated){$("#userMobile").val(response["mobile"]);$("#userMobile").prop("hidden",true);}});}});$(document).on("click","#try-codekata",function(data){window.location.href="code-kata.html";});$(document).on("input change","#emailInput",function(data){$("#passField").css("display","none");$("#confirmPassField").css("display","none");});$(document).on("click","#applyCoupon",function(data){applyCoupon=$("#applyCoupon").hasClass("apply");if(applyCoupon){$("#applyCoupon").removeClass("apply");$("#applyCoupon").addClass("remove");}else{$("#applyCoupon").removeClass("remove");$("#applyCoupon").addClass("apply");}});$(window).scroll(function(){if(window.innerWidth>900){topOfFooter=$(".main-footer").position().top;scrollDistanceFromTopOfDoc=$(document).scrollTop()+570;scrollDistanceFromTopOfFooter=scrollDistanceFromTopOfDoc-topOfFooter;if(scrollDistanceFromTopOfDoc>topOfFooter){$(".fixed-card").css("margin-top",0-scrollDistanceFromTopOfFooter-200);}else if(window.innerWidth>900&&$(".bodyContainer").position().top>$(document).scrollTop()){$(".fixed-card").css("margin-top",-12);}
else{$(".fixed-card").css("margin-top",-12);}}
let formPositon=$('.fixed-card').offset().top;let formPositonHeight=$('.fixed-card').outerHeight();let windowHeight=$(window).height();let windowPosition=$(this).scrollTop();});$(document).on("focusout","#buy-bundle",function(data){let bundleObj=new CourseBundle();let emailId=$("#userEmail").val();bundleObj.validateField('#userEmail');let isValidated=$("#userEmail").data("validated");let loggedState=$("#userEmail").data("loggedState");let isRegistered=$("#userEmail").data("registeredUser");let emailValidated=$("#userEmail").data("allFieldValidated");let mobile=$("#userMobile").val();if(!isValidated&&!loggedState){let name=$("#userName").val();if(emailId&&emailValidated){let input={type:"validateUser",emailId:emailId,name:name,mobile:mobile};input["source"]="Not Set";input["medium"]="Not Set";input["campaign"]="Not Set";if(queries.utm_source!=undefined){input["source"]=queries.utm_source;}
if(queries.utm_medium!=undefined){input["medium"]=queries.utm_medium;}
if(queries.utm_campaign!=undefined){input["campaign"]=queries.utm_campaign;}
input["url"]=url;input["product"]=$("#bundlePayment").data("course");authorize.ajax(input,"buyBundle",function(data){$("#userEmail").data("validated",true);data=JSON.parse(data);bundleObj.decideUser(data);});}}
let password=$("#password").val();let confirmPassword=$("#confirmPassword").val();if(!$("#userEmail").data("registeredUser")&&password!=confirmPassword&&password&&confirmPassword){$("#misMatch").prop("hidden",false);$("#nonUserMessage").prop("hidden",true);}
else{$("#misMatch").prop("hidden",true);}});$(document).on("click","#bundlePayment",function(){let payObject=new coursePayment();let bundleObj=new CourseBundle();let isRegistered=$("#userEmail").data("registeredUser");$("#userEmail").data("allFieldValidated",true);bundleObj.validateField("#userName");bundleObj.validateField("#userMobile");let userMobile=$("#userMobile").val();let userName=$("#userName").val();if($("#userEmail").data("loggedState")){let input={type:"logging",userName:userName,userMobile:userMobile};input["source"]="Not Set";input["medium"]="Not Set";input["campaign"]="Not Set";if(queries.utm_source!=undefined){input["source"]=queries.utm_source;}
if(queries.utm_medium!=undefined){input["medium"]=queries.utm_medium;}
if(queries.utm_campaign!=undefined){input["campaign"]=queries.utm_campaign;}
input["url"]=url;input["product"]=$("#bundlePayment").data("course");if($("#userEmail").data("allFieldValidated")){authorize.ajax(input,"buyBundle",function(data){payObject.paymentTypeRazorPay($("#bundlePayment").data("course"),"courseBundle",input["userType"]);});}}
bundleObj.validateField("#password");bundleObj.validateField("#userEmail");bundleObj.validateField("#userMobile");let password=$("#password").val();let emailId=$("#userEmail").val();let confirmPassword=$("#confirmPassword").val();if(!isRegistered&&!$("#userEmail").data("loggedState")){if($("#password").val()==""){$("#password").addClass("is-invalid");return false;}
if(password!=confirmPassword){$("#userEmail").data("allFieldValidated",false);}
let input={type:"logging",email:emailId,password:password,fname:userName,lname:"",phone:userMobile};bundleObj.validateField("#userName");if($("#userEmail").data("allFieldValidated")){input["source"]="Not Set";input["medium"]="Not Set";input["campaign"]="Not Set";if(queries.utm_source!=undefined){input["source"]=queries.utm_source;}
if(queries.utm_medium!=undefined){input["medium"]=queries.utm_medium;}
if(queries.utm_campaign!=undefined){input["campaign"]=queries.utm_campaign;}
input["url"]=url;grecaptcha.execute("6LdADb4UAAAAAA1feb36sozffPYRKKOqD9WPbibp",{action:"register"}).then(function(token){capchetoken=token;});input["capchetoken"]=capchetoken;authorize.ajax(input,"mregister",function(data){data=data.substring(1,data.length-1)
data=JSON.parse(data);hash=data.hash
input["emails"]=emailId;input["userMobile"]=userMobile;input["userName"]=userName;input["product"]=$("#bundlePayment").data("course");authorize.ajax(input,"buyBundle",function(data){payObject.paymentTypeRazorPay($("#bundlePayment").data("course"),"courseBundle",input["userType"],"",hash);});});}}
let input={type:"login",emails:emailId,password:password,userName:userName,userMobile:userMobile};if(isRegistered&&!$("#userEmail").data("loggedState")&&$("#userEmail").data("allFieldValidated")){input["source"]="Not Set";input["medium"]="Not Set";input["campaign"]="Not Set";if(queries.utm_source!=undefined){input["source"]=queries.utm_source;}
if(queries.utm_medium!=undefined){input["medium"]=queries.utm_medium;}
if(queries.utm_campaign!=undefined){input["campaign"]=queries.utm_campaign;}
input["url"]=url;input["product"]=$("#bundlePayment").data("course");authorize.ajax(input,"buyBundle",function(data){data=JSON.parse(data);bundleObj.hideProp("#userMessage");if(data.access=="true"){if(data.auth){authorize.setSession("signInAuth",data.auth);}
bundleObj.hideProp("#userMessage");bundleObj.hideProp("#invalidPassword");let payObject=new coursePayment();let authToken=authorize.getSession("signInAuth");payObject.paymentTypeRazorPay($("#bundlePayment").data("course"),"courseBundle",input["userType"],authToken);}
else if(data.access=="false"){bundleObj.hideProp("#loginSuccessful");bundleObj.showProp("#invalidPassword");}});}});$(document).on("","#buy-bundle",function(data){try{data.preventDefault();$("#userEmail").data("allFieldValidated",true);let bundleObj=new CourseBundle();bundleObj.validateField("#password");let isRegistered=$("#userEmail").data("registeredUser");if(!isRegistered){bundleObj.validateField("#confirmPassword");}
if($("#userEmail").data("allFieldValidated")&&!isRegistered){if($("#password").val()==""){$("#password").addClass("is-invalid");return false;}
let firstName=$("#userName").val();let email=$("#userEmail").val();let password=$("#password").val();let input={email:email,password:password,fname:firstName,lname:""};authorize.ajax(input,"mregister",function(data){});}}
catch(error){}});$(document).on("click","#applyOffer",function(e){e.preventDefault();let requestData={};let courseName=$("#bundlePayment").data("course");let auth=authorize.getSession("authToken");if(auth==null){let bundleObj=new CourseBundle();bundleObj.validateField("#userEmail");if(!($("#userEmail").hasClass("is-invalid"))){requestData["email"]=$("#userEmail").val();}else{return false;}}
requestData["type"]="offerCode";requestData["courseName"]=courseName;requestData["offerCode"]=$("#referralCode").val();if($("#applyOffer").hasClass("remove")){requestData["requestType"]="remove";authorize.ajax(requestData,"discount_check",function(responseData){$(".result-message").html("");$("#discountedPrice").html("");$("#discountedPrice").removeClass("price");$("#paymentPrice").removeClass("strikeout");$("#referralCode").val("");$("#applyOffer").removeClass("remove");$("#applyOffer").addClass("apply");});return false;}
if(!requestData["offerCode"]){$("#referralCode").addClass("is-invalid");}else{authorize.ajax(requestData,"discount_check",function(responseData){responseData=JSON.parse(responseData);if(responseData.offer_status=="expired"){$(".result-message").html("<span class='text-danger'>Invalid or Expired coupon</span>");$("#discountedPrice").html("");$("#discountedPrice").removeClass("price");$("#paymentPrice").removeClass("strikeout");$("#applyOffer").removeClass("remove");$("#applyOffer").addClass("apply");}else{let res1="";res1+='<i class="fa fa-inr">'+responseData.remaining_amount+'<i>';$(".result-message").html('<p class="text-success">Congratulations! You have been given <span class="price" style="color:#28a745">'+responseData.offer_price+'</span> Off</p>');$("#discountedPrice").html(res1);$("#discountedPrice").addClass("price");$("#paymentPrice").addClass("strikeout");$("#applyOffer").removeClass("apply");$("#applyOffer").addClass("remove");}});}});$(document).on("input change","#userEmail",function(data){$("#userEmail").data("validated",false);});$(document).on('click','.is-invalid',function(){$(this).removeClass("is-invalid");});function renderVideo(){try{const player=new Plyr("#course-video");window.player=player;player.source={type:'video',sources:[{src:$("#bundlePayment").data("videoid"),provider:'youtube',}],};player.play();$(".plyr--full-ui").addClass("embed-responsive-item");$(".plyr__video-wrapper").addClass("embed-responsive-item");$("video").addClass("embed-responsive-item");}
catch(error){console.log(error);}}